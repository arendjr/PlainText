{
  "name": "beggar",
  "plural": "beggars",
  "indefiniteArticle": "a",
  "triggers": { "onActive": "(function() {\n    var room = this.currentRoom;\n    var enemy = this.enemies.findFirstAmong(room.characters);\n    if (enemy && !room.characters.named('city guard')) {\n        this.kill(enemy);\n    }\n})", "onAttack": "(function(attacker) {\n    if (!this.enemies.contains(attacker)) {\n        this.enemies.push(attacker);\n    }\n    this.setTimeout(function() {\n        this.invokeTrigger('onActive');\n    }, 200);\n})", "onCharacterDied": "(function(defendant, attacker) { this.setTimeout(function() { if (!this.currentRoom.items.isEmpty()) { this.take(this.currentRoom.items); } }, randomInt(2000, 8000)); })", "onCharacterEntered": "(function(activator) {\n    if (activator.name === \"city guard\" ||\n        activator.race.name === \"animal\" ||\n        this.dontBeg) {\n        return;\n    }\n\n    this.dontBeg = true;\n\n    this.setTimeout(function() {\n        if (activator.currentRoom !== this.currentRoom) {\n            return;\n        }\n\n        if (this.enemies.contains(activator)) {\n            this.kill(activator);\n            return;\n        }\n\n        this.say(Util.randomAlternative(\n            \"Can you share me a dollar, \" + (activator.gender === \"male\" ? \"sir\" : \"ma'am\") + \"?\",\n            \"You got something to spare?\",\n            \"Please, \" + (activator.gender === \"male\" ? \"sir\" : \"ma'am\") + \", show me some generosity.\"\n        ));\n    }, 500);\n\n    this.setTimeout(function() {\n        delete this.dontBeg;\n    }, 3500);\n})", "onReceive": "(function(giver, item) {\n    this.setTimeout(function() {\n        switch (randomInt(0, 3)) {\n            case 0:\n                this.say(\"May the gods remember your deed!\");\n                break;\n            case 1:\n                this.currentRoom.characters.send(\"The beggar grins.\");\n                break;\n            case 2:\n                this.say(\"You are an example to all men!\");\n                break;\n        }\n    }, 300);\n})", "onSpawn": "(function() {\n    this.enemies = [];\n})", "onTalk": "(function(speaker, message) {\n    this.setTimeout(function() {\n        message = message.toLower();\n        if (message.endsWith(\".\") || message.endsWith(\"?\") || message.endsWith(\"!\")) {\n            message = message.left(message.length - 1);\n        }\n        \n        var words = message.split(\" \");\n        if (words[0] === \"hi\" || words[0] === \"hello\") {\n            this.talk(speaker, \"What's up?\");\n        } else if (words.contains(\"key\") || words.contains(\"tower\") ||\n                   words.contains(\"locked\")) {\n            this.talk(speaker, \"You mean a key to the gate tower? \" +\n                               \"Better bother one of the guards instead.\");\n        } else if (message === \"no\") {\n            this.talk(speaker, \"May the gods judge your generosity!\");\n            speaker.send(\"The beggar spits at your feet.\");\n            \n            var others = this.currentRoom.characters;\n            others.removeOne(this);\n            others.removeOne(speaker);\n            others.send(\"The beggar spits at \" + speaker.name + \"'s feet.\");\n        } else {\n            this.talk(speaker, \"Please just give me some coin, okay?\");\n        }\n    }, 450);\n})" },
  "position": [ 0, 0, 0 ],
  "weight": 0,
  "cost": 0,
  "flags": "",
  "stats": [12, 11, 11, 11, 11, 11],
  "height": 0,
  "currentRoom": "room:65",
  "direction": [ 0, 0, 0 ],
  "race": "race:2",
  "characterClass": "class:147",
  "gender": "male",
  "respawnTime": 1200000,
  "respawnTimeVariation": 600000,
  "hp": 22,
  "maxHp": 22,
  "mp": 11,
  "maxMp": 11,
  "gold": 0,
  "weapon": "0",
  "secondaryWeapon": "0",
  "shield": "0"
}
