{
  "name": "shopper",
  "plural": "shoppers",
  "indefiniteArticle": "a",
  "triggers": { "onAttack": "(function(attacker) {\n    this.enemies.insert(attacker);\n\n    this.setTimeout(function() {\n        this.shout(\"Help! Guards!\");\n        this.setTimeout(function() {\n            var currentRoom = this.currentRoom;\n            this.go(currentRoom.portals.filter(function(portal) {\n                return portal.nameFromRoom(currentRoom).endsWith(\"stall\") ||\n                       portal.oppositeOf(currentRoom).name.contains(\"Market\");\n            }).randomElement());\n        }, 200);\n    }, 150);\n})", "onCharacterEntered": "(function(activator) {\n    var room = this.currentRoom;\n    var characters = room.characters;\n    if (activator.name.contains(\"city guard\") && characters.containsAny(this.enemies)) {\n        var enemy = this.enemies.findFirstAmong(characters);\n        this.setTimeout(function() {\n            if (!room.characters.isEmpty() && !this.pointed) {\n                room.characters.send(this.definiteName(room.characters).capitalized() + \" points to \" + enemy.definiteName(characters) + \".\");\n                this.pointed = true;\n            }\n    \n            activator.enemies.insert(enemy);\n            this.setTimeout(function() {\n                activator.invokeTrigger(\"onActive\");\n                this.pointed = false;\n            }, randomInt(100, 400));\n        }, 10);\n    }\n})", "onSpawn": "(function() {\n    var self = this;\n\n    function getGold() {\n        self.setTimeout(function() {\n            var items = this.currentRoom.items;\n            for (var i = 0; i < items.length; i++) {\n                if (items[i].name.contains(\"gold\")) {\n                    this.take([ items[i] ]);\n                }\n            }\n        }, randomInt(1000, 10000));\n    }\n\n    this.setInterval(function() {\n        var portal = this.currentRoom.portals.randomElement();\n        var name = portal.nameFromRoom(this.currentRoom);\n        var destination = portal.oppositeOf(this.currentRoom);\n        if ((name.endsWith(\"stall\") || destination.name.contains(\"Market\")) &&\n            !destination.characters.containsAny(this.enemies)) {\n            this.go(portal);\n            getGold();\n        }\n    }, 17111);\n\n    this.gold = randomInt(3, 21);\n    this.enemies = [];\n})" },
  "position": [ 0, 0, 0 ],
  "weight": 0,
  "cost": 0,
  "flags": "",
  "stats": [8, 7, 7, 7, 7, 7],
  "height": 0,
  "currentRoom": "room:65",
  "direction": [ -70, 70, 0 ],
  "race": "race:2",
  "characterClass": "class:147",
  "gender": "female",
  "respawnTime": 1800000,
  "respawnTimeVariation": 600000,
  "hp": 14,
  "maxHp": 14,
  "mp": 7,
  "maxMp": 7,
  "gold": 20,
  "weapon": "0",
  "secondaryWeapon": "0",
  "shield": "0"
}
